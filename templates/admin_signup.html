<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Signup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <style>
        .form-card{
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            
        }
    </style>
<div class="container form-card d-flex justify-content-center align-items-center" style="height: 100vh;">
  <div class="card p-4 shadow" style="width: 350px;">
    <h3 class="text-center mb-3">Admin Signup</h3>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    <form method="POST">
      <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <input type="text" name="name" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" name="email" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" name="password" class="form-control" required>
      </div>

      
<div class="mb-3">
  <label for="country" class="form-label">Country</label>
  <select name="country" id="country-select" class="form-control" onchange="updateCurrency()" required>
    {% for c in countries %}
      <option value="{{ c.country }}">{{ c.country }}</option>
    {% endfor %}
  </select>
</div>

<div class="mb-3">
  <label for="currency" class="form-label">Currency</label>
  <select name="currency" id="currency-select" class="form-control" required>
    <!-- Options will be populated by JS -->
  </select>
</div>
      <button type="submit" class="btn btn-primary w-100">Signup</button>
      <p class="mt-2 text-center">Already have an account? <a href="{{ url_for('admin_login') }}">Login</a></p>
    </form>
  </div>
</div>



<script>
  const countries = {{ countries | tojson }};
  function updateCurrency() {
      const selectedCountry = document.getElementById('country-select').value;
      const currencySelect = document.getElementById('currency-select');
      currencySelect.innerHTML = '';
      const countryCurrencies = countries.filter(c => c.country === selectedCountry)
                                       .map(c => c.currency);
      countryCurrencies.forEach(c => {
          const option = document.createElement('option');
          option.value = c;
          option.text = c;
          currencySelect.appendChild(option);
      });
  }
  // Initialize currency dropdown
  updateCurrency();
</script>

</body>
</html>