<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Admin Dashboard</a>
      <div class="d-flex">
        <span class="navbar-text text-white me-3">Welcome, {{ admin_name }}</span>
        <a class="btn btn-outline-light" href="{{ url_for('logout') }}">Logout</a>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <!-- Stats Section -->
    <div class="row text-center">
      {% for stat in stats %}
      <div class="col-md-4">
        <div class="card shadow p-3 mb-4">
          <h5>{{ stat.role }}</h5>
          <p class="fs-3">{{ stat.count }}</p>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Action Buttons -->
    <div class="mb-3">
      <a href="{{ url_for('admin_signup') }}" class="btn btn-primary">Add Admin</a>
      <a href="{{ url_for('employee_signup') }}" class="btn btn-success">Add Employee</a>
      <a href="{{ url_for('manager_signup') }}" class="btn btn-warning">Add Manager</a>
    </div>

    <!-- Users Table -->
    <div class="card shadow">
      <div class="card-header bg-primary text-white">All Users</div>
      <div class="card-body">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
            <tr>
              <td>{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.role }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <h3>Welcome {{ admin_name }}</h3>

<h4>All Expenses</h4>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>Employee</th>
      <th>Manager</th>
      <th>Amount</th>
      <th>Description</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for exp in expenses %}
    <tr>
      <td>{{ exp.id }}</td>
      <td>{{ exp.employee_name }}</td>
      <td>{{ exp.manager_name or "Not assigned" }}</td>
      <td>{{ exp.amount }}</td>
      <td>{{ exp.description }}</td>
      <td>{{ exp.status }}</td>
      <td>
        {% if exp.status != "Approved" %}
          <a href="{{ url_for('admin_approve_expense', expense_id=exp.id) }}" class="btn btn-success btn-sm">Approve</a>
        {% endif %}
        {% if exp.status != "Denied" %}
          <a href="{{ url_for('admin_deny_expense', expense_id=exp.id) }}" class="btn btn-danger btn-sm">Deny</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

</body>
</html>
